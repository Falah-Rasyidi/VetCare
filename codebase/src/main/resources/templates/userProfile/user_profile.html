<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}" lang="eng">

<head>
    <meta charset="utf-8">
    <title>User Profile</title>

<!--    link and 2 scripts Taken from w3Schools modal page-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


    <link th:href="@{/css/profile/profile.css}" rel="stylesheet" />
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
</head>

<body>
    <div class="content-class" layout:fragment="content">
<!--        FIX THIS NEXT SPRING-->
        <div th:if="${loggedInUser == null}"><h1>Plz log in</h1></div>
        <div th:if="${loggedInUser != null}">
            <h2 id="titleMargin">Profile and Settings</h2>
            <!-- Flex container for User Profile and new section -->
            <div class="profileNotificationsContainer">
                <div class="userDetails">
                    <div class="imgTitle">
                        <img id="circleImg" class="inline imgMargin" src="../../../images/user-icon.png" alt="User Icon" >
                        <h3 class="inline">User Profile</h3>
                    </div>
                    <div class="detailsBox">
                        <div class="divInfo">
                            <h4 class="inline">First Name: </h4>
                            <h4 class="inline nonBold" th:if="${loggedInUser != null}"> <span th:text="${loggedInUser.firstName}">User</span></h4>
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Last Name: </h4>
                            <h4 class="inline nonBold" th:if="${loggedInUser != null}"> <span th:text="${loggedInUser.lastName}">User</span></h4>

                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Email: </h4>
                            <h4 class="inline nonBold" th:if="${loggedInUser != null}"> <span th:text="${loggedInUser.email}">User</span></h4>

                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Phone no.: </h4>
                            <h4 class="inline nonBold" th:if="${loggedInUser != null}"> <span th:text="${loggedInUser.phoneNumber}">User</span></h4>

                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Address:</h4> <h4 class="inline">No address in db</h4>
    <!--                        <h4 class="inline nonBold" th:if="${loggedInUser != null}"> <span th:text="${loggedInUser.address}">User</span></h4>-->
                        </div>
                        <button type="button" class="jp-button-design" data-toggle="modal" data-target="#editUserInfo">Edit</button>

                    </div>
                </div>

                <!-- Notifications -->
                <div class="notifications">
                    <div class="sectionHeader">
                        <div class="imgTitle">
                            <img class="inline imgMargin" src="../../../images/notification-icon.png" alt="Notification Icon">
                            <h3 class="inline">Notifications Settings</h3>
                        </div>

                    </div>
                    <div class="detailsBox">
                        <div class="divInfo">
    <!--                        INPUTS wants a label, hence yellow lines, but i prefer the h4 styling-->
                            <h4 class="inline">Receive Appointment Reminders: </h4>
                            <input type="checkbox" id="appointmentReminder" name="appointmentReminder" class="inline">
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Receive Delivery Updates: </h4>
                            <input type="checkbox" id="deliveryUpdates" name="deliveryUpdates" class="inline">
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Notify of Product Sales: </h4>
                            <input type="checkbox" id="productSales" name="productSales" class="inline">
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Notify of News and Events: </h4>
                            <input type="checkbox" id="newsEvents" name="newsEvents" class="inline">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pet Profiles-->
        <!--    get all from database, make a carasoul?-->
            <div class="petAndAddPetContainer">
                <div class="petDetails">
                    <div class="imgTitle">
                        <img id="opac" class="inline imgMargin" src="../../../images/paw-icon.png" alt="Profile Icon" >
                        <h3 class="inline">Pet Profiles</h3>
                    </div>
                    <div class="detailsBox">
                        <div class="divInfo">
                            <h4 class="inline">Pet Type: </h4>
                            <p class="inline"> PLACEHOLDER </p>
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Name: </h4>
                            <p class="inline"> PLACEHOLDER </p>
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Age: </h4>
                            <p class="inline"> PLACEHOLDER </p>
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Vaccination Certificates: </h4>
                            <form class="inline">
                                <input type="file" id="uploadButton" name="documents" class="inline">
                            </form>
                        </div>
                        <div class="divInfo">
                            <h4 class="inline">Veterinary History: </h4>
                        </div>
                        <div class="vetHistory">
                            <p> PLACEHOLDER</p>
                        </div>

                        <div class="petSelector">
                            <h4 class="block ">Pet Selector:</h4>
                            <button type="button" class="jp-button-design inline">Previous Pet</button>
                            <button type="button" class="jp-button-design inline">Next Pet</button>
                            <button type="button" class="jp-button-design inline" data-toggle="modal" data-target="#editPetInfo">Edit</button>
                        </div>
                    </div>
                </div>
                <div class="addPet">
<!--                    <button type="button" data-toggle="modal" data-target="#addNewPet" class="addPetButton">Add Pet</button>-->
<!--                    Hotfix-->
                    <button onclick="document.location='debug-pet'">Add Pet</button>
                </div>
            </div>
            <div class="footerMargin"></div>

        <!--    __________________________________MODALS__________________________________________-->
            <!-- Profile Edit Modal -->
            <div id="editUserInfo" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Edit Profile</h4>
                        </div>
                        <div class="modal-body modern-modal-body">
                            <div class="form-group">
                                <label for="fname">First Name:</label>
                                <input type="text" id="fname" name="fname" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="lname">Last Name:</label>
                                <input type="text" id="lname" name="lname" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="email">Email:</label>
                                <input type="email" id="email" name="email" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone No.:</label>
                                <input type="text" id="phone" name="phone" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="address">Address:</label>
                                <input type="text" id="address" name="address" class="form-control modern-input">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="cancelEditProfile" type="button" class="jp-button-design" data-dismiss="modal">Cancel</button>
                            <button id="resetEditProfile" class="jp-button-design">Reset</button>
                            <button id="SubmitEditProfile" class="jp-button-design">Submit</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pet Edit Details Modal -->
            <div id="editPetInfo" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Pet Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Edit Pet Info</h4>
                        </div>
                        <div class="modal-body modern-modal-body">
                            <div class="form-group">
                                <label for="petType">Pet Type:</label>
                                <input type="text" id="petType" name="petType" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="petGender">Pet Gender:</label>
                                <input type="text" id="petGender" name="petGender" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="petBreed">Pet Breed:</label>
                                <input type="text" id="petBreed" name="petBreed" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="petName">Pet's Name:</label>
                                <input type="text" id="petName" name="petName" class="form-control modern-input">
                            </div>
                            <div class="form-group">
                                <label for="petDob">Pet's Date of Birth:</label>
                                <input type="text" id="petDob" name="petDob" class="form-control modern-input">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="cancelEditPet" type="button" class="jp-button-design" data-dismiss="modal">Cancel</button>
                            <button id="resetEditPet" type="button" class="jp-button-design">Reset</button>
                            <button id="SubmitEditPet" type="button" class="jp-button-design">Submit</button>
                        </div>
                    </div>
                </div>
            </div>

<!--            ADD PET -->
            <div id="addNewPet" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Pet Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Add New Pet</h4>
                        </div>
                        <div class="modal-body modern-modal-body">
                            <form th:action="@{/user_profile}" th:object="${newPet}" method="post" novalidate>
                                <div class="form-group">
                                    <label for="petType">Pet Type:</label>
                                    <input type="text" id="petTypeAdd" name="petType" class="form-control modern-input" th:field="*{species}">
                                </div>
                                <div class="form-group">
                                    <label for="petGender">Pet Gender:</label>
                                    <input type="text" id="petGenderAdd" name="petGender" class="form-control modern-input" th:field="*{gender}">
                                </div>
                                <div class="form-group">
                                    <label for="petBreed">Pet Breed:</label>
                                    <input type="text" id="petBreedAdd" name="petBreed" class="form-control modern-input" th:field="*{breed}">
                                </div>
                                <div class="form-group">
                                    <label for="petName">Pet's Name:</label>
                                    <input type="text" id="petNameAdd" name="petName" class="form-control modern-input" th:field="*{name}">
                                </div>
                                <div class="form-group">
                                    <label for="petDob">Pet's Date of Birth:</label>
                                    <input type="text" id="petDobAdd" name="petDob" class="form-control modern-input" th:field="*{DOB}">
                                </div>

                                <div class="modal-footer">
                                    <button id="addCancelEditPet" type="button" class="jp-button-design" data-dismiss="modal">Cancel</button>
                                    <button id="addResetEditPet" type="button" class="jp-button-design">Reset</button>
                                    <button id="addSubmitEditPet" type="submit" class="jp-button-design">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

<!--        TO DO! Move javascript to seperate file and link with thymeleadf-->
        <script>
            // Wait for page to fully load before execution is possible
            document.addEventListener('DOMContentLoaded', function() {
                const petResetButton = document.getElementById('resetEditPet');
                const petCancelButton = document.getElementById('cancelEditPet');
                const userResetButton = document.getElementById('resetEditProfile');
                const userCancelButton = document.getElementById('cancelEditProfile');
                const addPetCancelButton = document.getElementById('addCancelEditPet');
                const addPetResetButton = document.getElementById('addResetEditPet');




                // Function to clear input fields for pet and profile
                const clearProfileForm = function() {
                    document.getElementById('fname').value = '';
                    document.getElementById('lname').value = '';
                    document.getElementById('email').value = '';
                    document.getElementById('phone').value = '';
                    document.getElementById('address').value = '';
                };

                const clearPetForm = function() {
                    document.getElementById('petType').value = '';
                    document.getElementById('petGender').value = '';
                    document.getElementById('petBreed').value = '';
                    document.getElementById('petName').value = '';
                    document.getElementById('petDob').value = '';
                };

                const clearAddPetForm = function() {
                    document.getElementById('petTypeAdd').value = '';
                    document.getElementById('petGenderAdd').value = '';
                    document.getElementById('petBreedAdd').value = '';
                    document.getElementById('petNameAdd').value = '';
                    document.getElementById('petDobAdd').value = '';
                };

                // Clear input fields for reset and cancel buttons
                petResetButton.addEventListener('click', clearPetForm);
                petCancelButton.addEventListener('click', clearPetForm);
                userResetButton.addEventListener('click', clearProfileForm);
                userCancelButton.addEventListener('click', clearProfileForm);
                addPetResetButton.addEventListener('click', clearAddPetForm);
                addPetCancelButton.addEventListener('click', clearAddPetForm);
            });
        </script>
    </div>
</body>
</html>
